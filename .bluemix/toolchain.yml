---
version: '2'

template:
  name: 'DYML: Scripting'
  description: 'DYML: Scripting'

toolchain:
  name: 'DYML: Scripting'

services:

  frontend-repo:
    
    $switch:
      - $expr: $env.expr
      - $default: hostedgit
      - $case: 'hostedgit'
        service_id: 'hostedgit'
        parameters:
          test1: $env.test
          test2: $env.test
          test3: $env.test || test3
          test4: $$env.test || test4
          test5: "$env.test || {{branch}}"
          test6: "$$env.test || {{branch}}"
          test4: "$$env.test !== 'foo' ? 'hello' : \"world\""
          #test5: "$env.test || 'test' + '5'"
          #test6: "$env.test || $env.expr || $env.tenant"
          
          # [ type: complex js ] -> invalid as mustache {{test3}}
          # won't resolve on the server-side
          #
          test14: "{{test3}} || $env.app_repo"

form:
  pipeline:
    parameters: {}
    schema: {}
