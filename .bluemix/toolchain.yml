version: '2'

template:

  name: "DYML: $switch/$case construct"

  description: "DYML: $switch/$case construct"
  required:
    - build
    - frontend-repo
    - sample-repo
  info:
    git url: >-
      [https://github.com/tonymcguckin/dynamicyml](https://github.com/tonymcguckin/dynamicyml)
    git branch: >-
      [master](https://github.com/tonymcguckin/dynamicyml/tree/master)

toolchain:
  name: 'DYML: $switch/$case construct'

services:

  # dynamic yml 'service' entry...
  sample-repo:

    $switch:

      - $expr: $env.source_provider
  
      - $default: "hostedgit"
        service_id: hostedgit
        parameters:
          test1: $env.test1
          #test1: $env.test1 || '{{a}} and {{b}}'
          #test1: $env.test1 || 'http://blah.com/repo'
          #test2: $env.test2 || "fo'rk'eee"
          #test3: $env.test3 || "Can't do this!"
          #test4: "$env.test4 == 'foo' ? 'bar' : 'http://blah.com/repo'"
          #test5: "$env.test5 == 'foo' ? 99.99 : 199.98"
          #test6: $env.test6 || 'clone'
          #test7: "$env.test6 || {{a}} is {{b}}"
          #test8: $env.test7

form:
  pipeline:
    parameters:
      username: 'admin'
      group: 'system'
    schema:
      $ref: deploy.json
