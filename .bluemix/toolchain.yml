version: '2'
template:
  name: "padraics test"
  header: '![](toolchain.svg?localize)'
  icon: icon.svg
  required:
    - sample-build
    - sample-repo
  info:
    git url: >-
      [https://github.com/open-toolchain/simple-toolchain-hosted](https://github.com/open-toolchain/simple-toolchain-hosted)
    git branch: >-
      [master](https://github.com/open-toolchain/simple-toolchain-hosted/tree/master)
toolchain:
  name: 'simple-toolchain-{{timestamp}}'
services:
  sample-repo:
    $switch:
      - $expr: $env.source_provider
      - $default: 'hostedgit'
        service_id: hostedgit
        parameters:
          repo_name: '{{toolchain.name}}'
          repo_url: $env.app_repo || 'https://github.com/open-toolchain/node-hello-world'
          type: $env.type || 'clone'
          has_issues: true
          enable_traceability: true
      - $case: 'githubconsolidated'
        service_id: githubconsolidated
        parameters:
          repo_name: '{{toolchain.name}}'
          repo_url: $env.app_repo || 'https://github.com/open-toolchain/node-hello-world'
          type: $env.type || 'clone'
          visibility: public
      - $case: 'github_integrated'
        service_id: github_integrated
        parameters:
          repo_name: '{{toolchain.name}}'
          repo_url: $env.app_repo || 'https://github.com/open-toolchain/node-hello-world'
          type: $env.type || 'clone'
          has_issues: true
          enable_traceability: true
form:
  pipeline:
    parameters:
      prod-app-name: 'test'
    schema:
      $ref: deploy.json
