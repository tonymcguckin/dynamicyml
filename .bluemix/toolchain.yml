version: '2'

template:
  name: "DYML_SECRETS_VIA_ENV_ENGINE"
  description: "DYML_SECRETS_VIA_ENV_ENGINE"
  required:
    - repo

  info:
    git url: "foo"
    git branch: "bar"

  $configuration:
    BASIC_WARNINGS: false
    ENABLE_EXTENSIONS: true
    ENABLE_SECRET_EXPANSION: true

toolchain:
  name: 'DYML_SECRETS_VIA_ENV_ENGINE'

services:
  repo:
    service_id: hostedgit
    parameters:
      test1: >
        $env.getSecret("kms:us-south:default:tmg-kp-1:tmg-common-service-id-apikey")
      test2: $env.timestamp

form:
  pipeline:
    parameters:
      username: 'admin'
      group: 'system'
    schema:
      $ref: deploy.json
